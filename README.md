 # <img style="vertical-align:middle" img src="images/octproz_icon.png" width="64"> Phase Extraction Extension

Phase Extraction Extension is a plugin for [OCTproZ](https://github.com/spectralcode/OCTproZ). It can be used to determine a suitable resampling curve for k-linearization. 

<p align="center">
  <img src="images/phase_extractionextension_ubuntu_screenshot.png" width="640">
</p>


How it works
----------

<p align="center">
  <img src="images/phase_extraction_processing.png" >
</p>

The phase of a calibration signal is extracted, which is used to generate a resampling curve for k-linearization.

A calibration signal can be easily generated by placing a glass window close to the OCT reference arm mirror.

A detailed explanation can be found in the [publication](https://doi.org/10.15488/11355). 


How to use
----------
Watch [this video!](https://www.youtube.com/watch?v=nlBWCv9TDJ8)

Demo dataset
----------
A demo dataset can be found [here](https://figshare.com/articles/dataset/Swept_Source_OCT_test_dataset_for_OCTproZ_Phase_Extraction_Extension/20098094). 

Download and installation
----------
Download the zip archive from the [GitHub release section](https://github.com/spectralcode/PhaseExtractionExtension/releases) and extract it into the OCTproZ folder (_phaseextractionextension.dll_ should be placed in the _plugins_ folder and _libfftw3-3.dll_ should be in the same folder as _octproz.exe_).



How to compile
----------
Phase Extraction Extension is a submodule of OCTproZ and you can clone it together with OCTproZ. 
### 1. Clone the Repository

#### Full OCTproZ with all submodules

Clone **OCTproZ** along with all its submodules, including the **Phase Extraction Extension**:

```bash
git clone --recurse-submodules https://github.com/spectralcode/OCTproZ.git
```

If you've already cloned OCTproZ without submodules:

```bash
cd OCTproZ
git submodule update --init --recursive
```

The **Phase Extraction Extension** will be located at:

```
OCTproZ/octproz_project/octproz_plugins/octproz-phase-extraction-extension
```

It is automatically included in the OCTproZ build via `octproz_plugins.pro`.

#### Clone Only the Phase Extraction Extension Submodule

If you already have OCTproZ cloned and just need the **Phase Extraction Extension**:

```bash
cd OCTproZ
git submodule update --init octproz_project/octproz_plugins/octproz-phase-extraction-extension
```

---

### 2. Install Dependencies

#### Windows

The **OCTproZ build process** will automatically copy the necessary FFTW3 DLLs (e.g., `libfftw3-3.dll`) to the folder where `octproz.exe` resides.

#### Ubuntu / Linux

Install **FFTW3** via package manager:
```bash
sudo apt-get install libfftw3 libfftw3-dev
```

---

### 3. Compile with Qt Creator

1. Open **Qt Creator**.
2. Load the main project file: `OCTproZ/octproz_project/octproz_project.pro`
3. Select the appropriate Qt kit if not already done. 
4. The **Phase Extraction Extension** will already be included in the build, as it's part of `octproz_plugins.pro`.
5. Build the project.


There is also a video showing how to build the Phase Extraction Extension on Windows, available [here](https://www.youtube.com/watch?v=DHB3NX_P1vk). Note that the video is slightly outdated, as the Phase Extraction Extension was not a submodule at the time of recording. The relevant part starts at minute 12:50.


Dependencies
----------
- [FFTW](http://www.fftw.org/)
- [Eigen](http://eigen.tuxfamily.org/)
- [QCustomPlot](https://www.qcustomplot.com/)


Publication
----------
M. Zabic, S. Hansert, S. Johannsmeier, D. Heinemann, A. Heisterkamp, and T. Ripken, "OCT wavenumber calibration with simple reference arm modification," in European Conferences on Biomedical Optics 2021 (ECBO), OSA Technical Digest (Optical Society of America, 2021), paper EW4A.5. 


License
----------
Phase Extraction Extension is licensed under GPLv3. See [LICENSE](LICENSE).
